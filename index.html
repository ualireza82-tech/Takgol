<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>AJ SPORTS LIVE</title>
<style>
body{
  margin:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
  font-family:Arial,sans-serif;
}
.video-container{
  position:relative;
  width:100vw;
  height:100vh;
}
video{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  background:#000;
  transition:opacity 0.3s ease;
  opacity:0;
}
#video{opacity:0;}
</style>
</head>
<body>
<div class="video-container">
  <video id="video" autoplay muted playsinline></video>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
const video = document.getElementById('video');
const videoSrc = "https://wo.cma.footballii.ir/hls2/b1_high.m3u8";

if(Hls.isSupported()){
    const hls = new Hls({
        enableWorker:true,
        lowLatencyMode:false,
        maxBufferLength:0.1,         // بافر ۵ ثانیه
        maxMaxBufferLength:0.1
    });
    hls.loadSource(videoSrc);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,()=>{video.play().catch(()=>{});});
}else if(video.canPlayType('application/vnd.apple.mpegurl')){
    video.src = videoSrc;
    video.preload='auto';
    video.play().catch(()=>{});
}

video.addEventListener('loadeddata',()=>{
    video.style.opacity=1;
});

video.muted = true;

document.body.addEventListener('click',()=>{video.play().catch(()=>{});},{once:true});
document.body.addEventListener('touchstart',()=>{video.play().catch(()=>{});},{once:true});
</script>
</body>
</html>